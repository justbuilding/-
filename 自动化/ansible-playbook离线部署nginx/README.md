### 任务：

​	通过ansible-playbook来部署nginx，可离线部署到本地，端口为8080



### 参数:

​	修改nginx运行端口只需要修改roles/nginx/vars/main.yml文件的第2行中的ngxport





### 执行结果：

```text
[root@localhost nginx_test]# ansible-playbook -i hosts_machine nginx.yml
[WARNING]: file /root/nginx_test/roles/nginx/tasks/service.yml is empty and had no tasks to include

PLAY [web] ******************************************************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [192.168.227.100]

TASK [nginx : 创建nginx组] *****************************************************************************************************************************************************************************************
ok: [192.168.227.100]

TASK [nginx : 创建nginx用户] ****************************************************************************************************************************************************************************************
ok: [192.168.227.100]

TASK [nginx : 拷贝源码包] ********************************************************************************************************************************************************************************************
changed: [192.168.227.100] => (item={u'dest': u'/tmp/nginx1.4.tar', u'src': u'nginx1.4.tar'})

TASK [nginx : 解压源码包] ********************************************************************************************************************************************************************************************
changed: [192.168.227.100] => (item={u'dest': u'/usr/local', u'src': u'/tmp/nginx1.4.tar'})

TASK [nginx : Start Install NGINX] ******************************************************************************************************************************************************************************
changed: [192.168.227.100]

TASK [nginx : 备份配置文件] *******************************************************************************************************************************************************************************************
changed: [192.168.227.100]

TASK [nginx : debug] ********************************************************************************************************************************************************************************************
ok: [192.168.227.100] => {
    "msg": "备份过程"
}

TASK [nginx : 拷贝配置文件] *******************************************************************************************************************************************************************************************
changed: [192.168.227.100] => (item={u'dest': u'/usr/local/nginx/conf/nginx.conf', u'src': u'nginx.conf.j2'})

RUNNING HANDLER [nginx : restart nginx] *************************************************************************************************************************************************************************
changed: [192.168.227.100]

PLAY RECAP ******************************************************************************************************************************************************************************************************
192.168.227.100            : ok=10   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
```





### 查看端口：

```text
[root@localhost nginx_test]# netstat -antpl | grep 8080
tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN      67976/nginx: master
```

